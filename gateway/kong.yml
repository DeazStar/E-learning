_format_version: "3.0"

services:
  - name: auth-service
    host: auth-service  # This is the container name or service address
    port: 8001
    protocol: http
    routes:
      - name: login-route
        paths:
          - /api/users/login/
        strip_path: false
      - name: register-route
        paths:
          - /api/users/register/
        strip_path: false

  - name: course-management-service
    host: course-management-service  # This is the container name or service address
    port: 8005
    protocol: http
    routes:
      - name: course-route
        paths:
          - /course/
        strip_path: false
    plugins:
      - name: jwt
        config:
          key_claim_name: kid
          claims_to_verify:
            - exp

consumers:
  - username: auth-service

jwt_secrets:
  - consumer: auth-service
    secret: django-insecure-jsx8%)huo*1
    key: d89c03b4-27fb-4b9b-9b33-2d122cb6be6a
